<!-- Login Good -->
	<div class="container col-md-4 col-md-offset-4">
		<div class="panel panel-primary">
			<div class="panel-heading">
				<h3 class="panel-title">Login</h3>
			</div>
			<div class="panel-body">
				<form role="form">
				  <div class="form-group">
					<input type="text" class="form-control" placeholder="Email" ng-model="email">
				  </div>
				  <div class="form-group">
					<input type="password" class="form-control" placeholder="Password" ng-model="password">
				  </div>
				  <button  ng-click="clickLogin()" class="btn btn-info btn-block">Submit!</button>
				</form>	
			</div>
		</div>	
	</div>
	
<script>
sys.ctrl = function($scope, $http) {
	$scope.email="";
	$scope.password="";
	
	$scope.clickLogin= function(number){
		//do an AJAX request to analize whether username and password are correct
		//the answer depends on the Code field. See file Codes.txt to know what each code means
		$http.post("request/accntLogin.php",{email:$scope.email, password: $scope.password})
		.success(function(json) {
			if(json["Code"] == 1000){//According to Code 1000, login is good
				//Add data to the proper variables
				sys.user= json;
				sys.navbarScope.userinfo = sys.user;

				//clear the fields of models for email and password
				$scope.email="";
				$scope.password="";
				
				//redirect to userMain
				$scope.go('/userMain');
			}else if(json["Code"] == 1001){	//According to Code 1001 login was unsuccessful
				$('#mMessgTitle').text("Login Un-SuccessFul");		
	 			$('#mMessgText').text("Wrong Email or Password");
				$('#mMessg').modal('show');
				$scope.password="";
			}else {//Code 1002: another error occurred, see details in console.
				$('#mMessgTitle').text("Login Un-SuccessFul");		
	 			$('#mMessgText').text("An Unexpected Error has occurred. Contact Administrator");
				$('#mMessg').modal('show');
				Console.log(json["CodeDetails"]);
				$scope.password="";
			}
		});		
	}
}
</script>